<html>
    <head>
        <style>
            .form {
                display: flex;
            }
        </style>
    </head>
    <body>
        <div>
            <form method="POST" action="/save">
                <div class="form">
                    <div>   
                        <div>
                            <label>HP игрока слева:</label>
                            <input type="text" name="leftPlayerHP">
                        </div>
                        <div>
                            <label>Победы игрока слева:</label>
                            <input type="text" name="leftPlayerWin">
                        </div>
                        <div>
                            <label>Игрок слева:</label>
                            <input type="text" name="leftPlayerName">
                        </div>
                        <div>
                            <label>Дэка слева:</label>
                            <input type="text" name="leftDeckName">
                        </div>
                    </div>

                    <div>   
                        <div>
                            <label>HP игрока справа:</label>
                            <input type="text" name="rightPlayerHP">
                        </div>
                        <div>
                            <label>Победы игрока справа:</label>
                            <input type="text" name="rightPlayerWin">
                        </div>
                        <div>
                            <label>Игрок справа:</label>
                            <input type="text" name="rightPlayerName">
                        </div>
                        <div>
                            <label>Дэка справа:</label>
                            <input type="text" name="rightDeckName">
                        </div>
                    </div>
                </div>

                <div>
                    <input type="submit" value="Сохранить"/>
                    <button id="startMatch">Начать матч</button>
                    <button id="resetButton">Дефолт</button>
                </div>

            </form>
        </div>
    </body>
    <script>
        const getData = async () => {
            const response = await fetch('/game');
            return await response.json();
        };
        const fillForm = (data) => {
            for (let key in data) {
                const element = document.getElementsByName(key)[0]
                if (element) {
                    element.value = data[key];
                }
            }
        }

        const main = async () => {
            const data = await getData();
            fillForm(data);
        }
        
        main();

        startMatch.addEventListener('click', async () => {
            await fetch('/start', { method: 'POST' });
        });

        resetButton.addEventListener('click', async () => {
            await fetch('/save', { method: 'POST', body: JSON.stringify(defaultObj) });
        });

        const defaultObj = {
            leftPlayerHP:20,
            leftPlayerWin:0,
            leftPlayerName:"Player1",
            leftDeckName:"Deck1",
            rightPlayerHP:20,
            rightPlayerWin:0,
            rightPlayerName:"Player2",
            rightDeckName:"Deck2",
            endTime: "2019-03-31T13:22:21.172Z"
        }
    </script>
</html>